# 第一部分 - 简单介绍

## 第 1 章 - 概述

### 本章概要

本章有如下几个最重要的内容：

- 互联网边缘部分和核心部分的作用，以及什么是分组交换

- 计算机的网络的性能指标

- 计算机网络分层次的体系结构，以及什么是协议和服务

### 计算机网络在信息时代的作用

存在三类网络，**电信网络**，**有线电视网络**，**计算机网络**，最重要的是**计算机网络**。

互联网即为因特网，英文为 Internet，由数量极大的各种计算机网络互连起来，具有两个基本特点：连通性和共享。

**互联网+** 指的是 互联网 + 各种传统行业。

### 互联网概述

#### 网络的网络

计算机网络指的是若干节点和连接这些节点的链路组成。

多个网络通过一些路由器构成一个更大的计算机网络，这称为互连网。

与网络相连的计算机称为主机。

#### 发展阶段

- 第一阶段：由 ARPANET 向互连网发展的过程。

- 第二阶段：构成了三级结构的互联网。

- 第三阶段：形成了全球范围的多层次的 ISP 结构的互联网。

在第三阶段中，出现了互联网服务提供者 ISP。

因为互联网中 ISP 数量增多，出现了互联网交换点 IXP 用于更快转发分组，以及更加有效利用互联网资源。

万维网 WWW 是基于互联网开发的一种信息共享服务，浏览网址一般使用的就是万维网。

#### 标准化工作

所有互联网的标准是以 RFC 文档的形式发布在网络上，少部分 RFC 成为了互联网的标准。

### 互联网组成

大体分为**边缘部分**和**核心部分**。

边缘部分用于用户直接使用，核心部分用于为用户提供服务。

#### 边缘部分

主机又称之为端系统。

边缘部分利用核心部分提供的服务进行通信，实际上是计算机上的一个进程与另一个计算机上的一个进程来进行通信。

通信大体分为两种方式：

- **客户 - 服务端** 模式（非对等网络）

- **Peer to Peer** 模式（对等网络）

#### 核心部分

核心部分主要组件是**路由器**，是**分组交换**实现的关键构件。

存在三种交换方式：

- 电路交换：建立连接 $\rightarrow$ 通话 $\rightarrow$ 释放连接

- 报文交换：将整个报文传输到相邻节点，全部储存后再次向下一个节点转发。

- 分组交换：将单个分组传输到相邻节点，储存后向下一个节点转发。

![三种交换方式](https://img.goldbro.top/wiki_课程_计算机网络基础第一部分_1-1.avif)

我们着重讲解**分组交换**的部分：

-   要发送的整块数据为一个报文，将一个报文分为多个数据段，每个数据段加上一个首部构成一个分组（包）。
-   分组交换采用了**储存转发**技术。
-   具体流程为：路由器收到分组以后，先暂时储存，检查首部，查找路由表。然后按照首部中的目的地址，转发给下一个路由器，以此类推将数据交付给最终目的主机。

### 计算机网络类别

#### 定义

计算机网络并非专门用来传输数据，还支持很多其他应用。

#### 几种不同类别的计算机网络

有如下几种网络：

- 广域网 WAN
- 城域网 MAN
- 局域网 LAN
- 个人局域网 PAN

**接入网 AN**是用来将用户接入到互联网的网络。

接入网是一个特殊的网络，位于端系统到互联网之间的一个网络。

### 计算机网络性能

#### 性能指标

##### 速率

是最重要的性能指标。

是数据的传输速率，单位为 bit/s，也可为 bps。

提到网络速率时，一般指的是**额定速率**或者**标称速率**。

##### 带宽

- 指某个信号具有的**频带宽度**。是频域称谓。

- 指网络中某通道传输数据的**能力**。是时域称谓。单位为 bit/s。

##### 吞吐量

指**单位时间**内通过某个网络的**实际数据量**。受到网络的带宽或者速率限制。

##### 时延

指数据由网络的一端传输到另一端所需要的**时间**。也可称为延迟或者迟延。

时延也可分为以下几个部分：

- **发送时延**：指主机或者路由器发送数据帧需要的时间。

    $$
    发送时延 =  数据帧长度(bit) \div 发送速率(bit/s)
    $$

- **传播时延**：是电磁波在信道中传播一定距离需要的时间。

    $$
    传播时延 = 信道长度 \div 电磁波传播速率
    $$

- **处理时延**：主机处理分组所需要的时间。

- **排队时延**：分组在经过路由器排队等待转发的时间。

**时延带面积**是一个用于表示同一时刻正在链路上传递的数据。

$$
时延带面积 = 传播时延 \times 带宽
$$

当 A 向 B 发送完数据以后需要收到 B 的发回确认信息才会继续发送数据，此时 A 发送完成数据以后等待确认的时间就是**往返时间 RTT**。

$$
有效数据率 = 数据长度 \div (发送时间 + RTT)
$$

**利用率**分为信道利用率和网络利用率：

- **信道利用率**指信道有多少时间是被利用的，即有数据通过的。

- **网路利用率**指的是全网络的信道利用率的加权平均值。

    $$
    D = {D_0 \over 1 - U}
    $$

    公式中 $\mathit{D}$ 为网络当前的时延， $\mathit{D_0}$ 为网络空闲时的时延， $\mathit{U}$ 是当前网络的利用率。

    这个公式表明网络利用率过高就会产生非常大的时延。

#### 非性能指标

有费用、质量、标准化、可靠性、可扩展性和可升级性、易于维护和管理。

### 计算机网络体系结构

#### 形成

两个计算机之间通信要完成**以下工作**：

- 发起通信的计算机要将数据通信的通路激活，保证数据能够正常的接收和发送。

- 告诉网络如何识别接收数据的计算机。

- 发起通信的计算机必须要查明计算机是否开机，并且与网络连接正常。

- 应用程序必须清楚接收计算机文件管理程序是否做好准备接收并储存文件。

- 若计算机文件格式不兼容，则至少其中一个计算机需完成格式转换工作。

- 对出现的各种差错和意外事故，需要有可靠的保证措施使接收计算机最终能够接收到文件。

相互通信的计算机系统必须**高度协调工作**才可以完成通信。

#### 协议

协议由**三个要素**构成：

- 语法：数据与控制信息的结构或格式。
- 语义：需要发出何种控制信息，完成何种动作以及做出何种响应。
- 同步：时间实现顺序的详细说明。

分层有如下的**好处**：

- 各层独立：两层不知道如何实现，只知道并使用接口。
- 灵活性好。
- 结构可分。
- 易于实现与维护。
- 能促进标准化工作。

各层需要完成以下**一种或者多种**工作：

- 差错控制。
- 流量控制。
- 分段和重装。
- 复用和分用。
- 连接的建立和释放。

计算机网络的各层及其协议的**集合**就是网络的体系结构。

#### 五层体系结构

![](https://img.goldbro.top/wiki_课程_计算机网络基础第一部分_1-2.avif)

TCP/IP 是个**四层**的体系结构，包含应用层、运输层、网际层和网络接口层。实质上 TCP/IP 只有上三层，最下面的网络接口层没什么内容。

五层结构大体如下：

- **应用层**
    
     - 通过应用进程间的交互来完成特定网络应用。
     - 定义的是应用进程间通信和交互的规则。
     - 协议有域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议等。
     - 应用层交互的数据单元称为报文。

- **运输层**

    - 负责向两台主机中进程之间的通信提供通用的数据传输服务。
    - 运输层有复用和分用的功能。
    - 存在以下两种协议：
        - 传输控制协议 TCP：提供面向连接的、可靠的数据传输服务。数据传输的单位是报文段。
        - 传输控制协议 TCP：提供面向连接的、可靠的数据传输服务。数据传输的单位是报文段。

- **网络层**

    - 为分组交换网上的不同主机提供通信服务；选择合适的路由。
    - 把运输层产生的报文段或用户数据报封装成分组或包进行传送。
    - TCP/IP 体系中，网络层使用 IP 协议，因此分组也叫 IP 数据报。

- **数据链路层**

    - 将网络层交下来的 IP 数据报组装成帧，在两个相邻结点的链路上传送帧。
    - 每一帧包括数据和必要的控制信息。

- **物理层**

    - 物理层传输的单位是比特。

数据在各层之间有如下的传递过程：

![](https://img.goldbro.top/wiki_课程_计算机网络基础第一部分_1-3.avif)

#### 实体、协议、服务和服务访问点

**实体**表示可发送或可接收信息的硬件或软件进程。

**协议**是控制两个对等实体间进行通信的规则的集合。

在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，也需要下一层提供的服务。

上层使用下层提供的服务必须通过与下层交换一些命令，即**服务原语**。

同一系统中相邻两层的实体交互的地方称为**服务访问点**，实际上就是一个逻辑接口。

协议必须把**所有不利的条件**都事先估计到，确保能应对**所有异常情况**。

#### TCP/IP 体系架构

现在某些应用程序**可以直接**使用 IP 层甚至网络接口层，如下图所示：

![](https://img.goldbro.top/wiki_课程_计算机网络基础第一部分_1-4.avif)

TCP/IP 协议中多种协议如下图所示：

![](https://img.goldbro.top/wiki_课程_计算机网络基础第一部分_1-5.avif)
